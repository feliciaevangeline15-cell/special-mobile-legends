<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Block Blast</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(to bottom,#ff9bc0,#ff4d6d);
  display:flex;
  justify-content:center;
  color:white;
}

.container{
  padding:30px;
  text-align:center;
}

.grid{
  display:grid;
  grid-template-columns:repeat(8,50px);
  gap:6px;
  background:rgba(255,255,255,0.1);
  padding:15px;
  border-radius:15px;
}

.cell{
  width:50px;
  height:50px;
  border-radius:10px;
  background:rgba(255,255,255,0.15);
  cursor:pointer;
}

.pieces{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:20px;
}

.slot{
  width:120px;
  min-height:80px;
  background:rgba(255,255,255,0.15);
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  gap:5px;
  justify-content:center;
  cursor:pointer;
}

.slot.selected{
  outline:3px solid white;
}

.block{
  width:28px;
  height:28px;
  border-radius:6px;
}

button{
  margin-top:20px;
  padding:10px 20px;
  border:none;
  border-radius:8px;
  background:white;
  color:#ff4d6d;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">
<h2>ðŸ’– Valentine Block Blast ðŸ’–</h2>
<div>Score: <span id="score">0</span></div>
<br>

<div id="grid" class="grid"></div>

<div class="pieces">
  <div id="slot0" class="slot"></div>
  <div id="slot1" class="slot"></div>
  <div id="slot2" class="slot"></div>
</div>

<button onclick="restart()">Restart</button>
</div>

<script>
const rows=8, cols=8;
let board=[];
let score=0;
let pieces=[];
let selected=null;

const shapes=[
 [[0,0]],
 [[0,0],[0,1]],
 [[0,0],[1,0]],
 [[0,0],[0,1],[0,2]],
 [[0,0],[1,0],[2,0]],
 [[0,0],[0,1],[1,0],[1,1]]
];

const colors=["#FF9BC0","#FF6B6B","#B388EB"];

function init(){
  board=Array.from({length:rows},()=>Array(cols).fill(null));
  score=0;
  pieces=[];
  selected=null;
  refillPieces();
  render();
}

function refillPieces(){
  while(pieces.length<3){
    const shape=JSON.parse(JSON.stringify(shapes[Math.floor(Math.random()*shapes.length)]));
    const color=colors[Math.floor(Math.random()*colors.length)];
    pieces.push({shape,color});
  }
}

function render(){
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      const div=document.createElement("div");
      div.className="cell";
      if(board[r][c]) div.style.background=board[r][c];
      div.onclick=()=>place(r,c);
      grid.appendChild(div);
    }
  }

  for(let i=0;i<3;i++){
    const slot=document.getElementById("slot"+i);
    slot.innerHTML="";
    slot.classList.remove("selected");
    if(!pieces[i]) continue;

    pieces[i].shape.forEach(()=>{
      const b=document.createElement("div");
      b.className="block";
      b.style.background=pieces[i].color;
      slot.appendChild(b);
    });

    slot.onclick=()=>{
      selected=i;
      document.querySelectorAll(".slot").forEach(s=>s.classList.remove("selected"));
      slot.classList.add("selected");
    };
  }

  document.getElementById("score").innerText=score;
}

function place(r,c){
  if(selected===null) return;

  const piece=pieces[selected];
  const baseR=r-piece.shape[0][0];
  const baseC=c-piece.shape[0][1];

  for(const [sr,sc] of piece.shape){
    const rr=baseR+sr;
    const cc=baseC+sc;
    if(rr<0||cc<0||rr>=rows||cc>=cols||board[rr][cc]) return;
  }

  piece.shape.forEach(([sr,sc])=>{
    board[baseR+sr][baseC+sc]=piece.color;
  });

  score+=piece.shape.length*10;
  pieces[selected]=null;
  selected=null;

  clearLines();
  if(pieces.every(p=>p===null)) refillPieces();
  render();
}

function clearLines(){
  for(let r=0;r<rows;r++){
    if(board[r].every(cell=>cell)){
      for(let c=0;c<cols;c++) board[r][c]=null;
      score+=100;
    }
  }

  for(let c=0;c<cols;c++){
    if(board.every(row=>row[c])){
      for(let r=0;r<rows;r++) board[r][c]=null;
      score+=100;
    }
  }
}

function restart(){
  init();
}

init();
</script>
</body>
</html>
